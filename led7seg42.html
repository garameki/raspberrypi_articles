<html lang='ja'><head><meta charset="utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><link rel="stylesheet" type="text/css" href="style.css" /><link rel="stylesheet" type="text/css" href="style_fukidashi.css" />
<script type="application/javascript" src="script.js"></script>
<meta name="description" content=">4Digit 7segment LEDをpyhonで操る">
<title>4Digit 7segment LEDをpyhonで操る|がらめきドットコム</title>
</head><body id="body">
<h1>4Digit 7segment LEDをpyhonで操る</h1>
<span class="spanExplain">参考サイト</span>
<ul>
<li><a href="https://media.readthedocs.org/pdf/smbus2/latest/smbus2.pdf">smbusのメソッド</a>
<li><a href="https://qiita.com/mykysyk@github/items/e15d7b2b1a988b8e29d4">python 現在時刻取得</a>
<li><a href="https://www.javadrive.jp/python/num/index6.html">文字列及び数値を整数に変換(int)</a>
<li><a href="https://note.nkmk.me/python-list-initialize/">Pythonのリスト（配列）を任意の値・要素数で初期化</a>
</ul>

<h2>時計</h2>
<div class="pp">
<pre>
#!/usr/bin/env python3

import smbus

import time
from datetime import datetime

D = [0] * 10
D[0] = 0x3F
D[1] = 0x06
D[2] = 0x5B
D[3] = 0x4F
D[4] = 0x66
D[5] = 0x6D
D[6] = 0x7D
D[7] = 0x27
D[8] = 0x7F
D[9] = 0x6F

DEVICE_BUS = 1
DEVICE_ADDR = 0x70
bus = smbus.SMBus(DEVICE_BUS)
bus.write_byte(DEVICE_ADDR,0x21)
bus.write_byte(DEVICE_ADDR,0x81)
bus.write_byte(DEVICE_ADDR,0xE0)
coron = 0
count = 1 
flag = True
while True:
	try:
		count += 1
		if count == 2:
			ms = datetime.now().strftime("%M%S")
			d1 = int(ms[0])
			d2 = int(ms[1])
			d3 = int(ms[2])
			d4 = int(ms[3])
			count = 0
		if flag:
			coron = 2
			flag = False
		else:
			coron = 0
			flag = True
		data = [D[d1],0,D[d2],0,coron,0,D[d3],0,D[d4]]
		bus.write_i2c_block_data(DEVICE_ADDR,0x00,data)
		time.sleep(0.5)

	except KeyboardInterrupt:
		break
</pre>
</div>

<br><hr><div style="text-align:right;"><a href="http://raspberrypi.garameki.com#20181121">がらめきドットコム</a><br>Powered by RaspberryPi3B+ Raspbian stretch</div></body></html>
